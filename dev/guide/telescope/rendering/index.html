<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Rendering · Starlight</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img class="docs-light-only" src="../../../assets/logo.png" alt="Starlight logo"/><img class="docs-dark-only" src="../../../assets/logo-dark.png" alt="Starlight logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Starlight</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Guide</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Walkthrough</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../walkthrough/intro/">Intro</a></li><li><a class="tocitem" href="../../walkthrough/getting-started/">Getting Started</a></li><li><a class="tocitem" href="../../walkthrough/app-lifecycle/">App Lifecycle</a></li><li><a class="tocitem" href="../../walkthrough/message-passing/">Message Passing</a></li><li><a class="tocitem" href="../../walkthrough/clock/">Clock</a></li><li><a class="tocitem" href="../../walkthrough/ecs/">Entity Component System</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Telescope</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../intro/">Intro</a></li><li class="is-active"><a class="tocitem" href>Rendering</a></li><li><a class="tocitem" href="../input/">Input</a></li><li><a class="tocitem" href="../physics/">Physics</a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../../examples/pong/">Pong</a></li></ul></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guide</a></li><li><a class="is-disabled">Telescope</a></li><li class="is-active"><a href>Rendering</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Rendering</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jhigginbotham64/Starlight.jl/blob/master/docs/src/guide/telescope/rendering.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Rendering"><a class="docs-heading-anchor" href="#Rendering">Rendering</a><a id="Rendering-1"></a><a class="docs-heading-anchor-permalink" href="#Rendering" title="Permalink"></a></h1><p>Entities that get drawn on the screen must satisfy several requirements:</p><ol><li>They <em>must</em> inherit from the abstract type <code>Starlight.Renderable</code>, since the scene graph culls objects based on type</li><li>They <em>must</em> be registered in the ECS using <code>instantiate!</code>, or the scene graph will not see them</li><li>They <em>must</em> define a <code>draw</code> method.</li></ol><p>Here is an example from Starlight&#39;s source code:</p><pre><code class="language-julia hljs">mutable struct ColorRect &lt;: Renderable
  function ColorRect(w, h; color=colorant&quot;white&quot;, kw...)
    instantiate!(new(); w=w, h=h, color=color, kw...)
  end
end

defaultDrawRect(r) = TS_VkCmdDrawRect(
  vulkan_colors(r.color)..., 
  r.abs_pos.x, r.abs_pos.y, r.w, r.h)

draw(r::ColorRect) = defaultDrawRect(r)</code></pre><p>...where <code>vulkan_colors</code> is a helper to convert <code>Colorant</code>s to the color format expected by Telescope/Vulkan.</p><p>Note that the real magic takes place in <code>TS_VkCmdDrawRect</code>, which is Telescope&#39;s API for specifically drawing rectangles. If you are using the Telescope backend, you are not able to draw anything that the API doesn&#39;t provide explicit support for, although you can compose supported &quot;drawables&quot; using for-loops and such inside your draw function.</p><p>Note too that properties are registered in the ECS rather than in the struct definition, as is true for all entities. You can still use struct fields, but they are only ever be referenced if the instance has no ECS attributes with the same name.</p><p>Finally, note the mix of property names. Some are constants defined as permanent columns of the underlying <code>DataFrame</code>, and others go to the <code>props</code> dictionary.</p><p>The only other <code>Renderable</code> exported by Starlight is <code>Sprite</code>:</p><pre><code class="language-julia hljs">mutable struct Sprite &lt;: Renderable
  function Sprite(img; cell_size=[0, 0], region=[0, 0, 0, 0], cell_ind=[0, 0], 
    color=colorant&quot;white&quot;, scale=XYZ(1,1,1), kw...)
    instantiate!(new(); img=img, cell_size=cell_size, 
      region=region, cell_ind=cell_ind, color=color,
      scale=scale, kw...)
  end
end

defaultDrawSprite(s) = TS_VkCmdDrawSprite(s.img, 
  vulkan_colors(s.color)..., 
  s.region[1], s.region[2], s.region[3], s.region[4], 
  s.cell_size[1], s.cell_size[2], s.cell_ind[1], s.cell_ind[2],
  s.abs_pos.x, s.abs_pos.y, s.scale.x, s.scale.y)

draw(s::Sprite) = defaultDrawSprite(s)</code></pre><p>More <code>Renderable</code>&#39;s will be &quot;natively&quot; supported in the future, if there&#39;s one in particular you&#39;d like to see then feel free to create an issue or, better still, submit a pull request.</p><p>These are not a high priority for now though, since sprites and rectangles are sufficient for almost all 2D use cases, and 3D is not a priority (although we&#39;re happy to make it a priority if you get in touch, see the README for contact info).</p><p>However, check out the Pong example for an idea of what can be done by composing sprites and rectangles.</p><p>There are two final Telescope-dependent subsystems to cover: input and physics.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../intro/">« Intro</a><a class="docs-footer-nextpage" href="../input/">Input »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.17 on <span class="colophon-date" title="Wednesday 18 May 2022 16:37">Wednesday 18 May 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
